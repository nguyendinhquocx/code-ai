# Auto-detection Rules
# Định nghĩa patterns để detect resources cần thiết từ user request

# ═══════════════════════════════════════════════════════════
# CLOUD SERVICES
# ═══════════════════════════════════════════════════════════

supabase:
  keywords:
    - "supabase"
    - "realtime database"
    - "postgres"
    - "postgresql realtime"

  resources:
    - key: "SUPABASE_URL"
      type: "url"
      format: "https://*.supabase.co"
      description: "Project URL from Supabase dashboard"
      required: true

    - key: "SUPABASE_ANON_KEY"
      type: "api_key"
      description: "Anonymous public key (client-side)"
      required: true
      secret: false

    - key: "SUPABASE_SERVICE_KEY"
      type: "api_key"
      description: "Service role key (server-side only)"
      required: false
      secret: true

  database:
    auto_detect: true
    from_schema: true

  guide: "guides/supabase-setup.md"
  setup_time: "5 minutes"
  cost: "FREE (Free tier available)"

firebase:
  keywords:
    - "firebase"
    - "firestore"
    - "firebase auth"

  resources:
    - key: "FIREBASE_API_KEY"
      type: "api_key"
      description: "Firebase Web API Key"
      required: true

    - key: "FIREBASE_PROJECT_ID"
      type: "string"
      description: "Firebase Project ID"
      required: true

  guide: "guides/firebase-setup.md"
  setup_time: "5 minutes"
  cost: "FREE (Spark plan)"

# ═══════════════════════════════════════════════════════════
# AI SERVICES
# ═══════════════════════════════════════════════════════════

openai:
  keywords:
    - "openai"
    - "gpt"
    - "chatgpt"
    - "gpt-4"
    - "gpt-3.5"
    - "ai chat"
    - "text generation"

  resources:
    - key: "OPENAI_API_KEY"
      type: "api_key"
      format: "sk-*"
      description: "OpenAI API key"
      required: true
      secret: true

    - key: "OPENAI_ORG_ID"
      type: "string"
      description: "Organization ID (optional)"
      required: false

  guide: "guides/openai-setup.md"
  setup_time: "3 minutes"
  cost: "PAY-AS-YOU-GO (Tính theo usage)"

anthropic:
  keywords:
    - "anthropic"
    - "claude"
    - "claude ai"

  resources:
    - key: "ANTHROPIC_API_KEY"
      type: "api_key"
      format: "sk-ant-*"
      description: "Anthropic API key"
      required: true
      secret: true

  guide: "guides/anthropic-setup.md"
  setup_time: "3 minutes"
  cost: "PAY-AS-YOU-GO"

# ═══════════════════════════════════════════════════════════
# PAYMENT SERVICES
# ═══════════════════════════════════════════════════════════

stripe:
  keywords:
    - "stripe"
    - "payment"
    - "checkout"
    - "subscription"

  resources:
    - key: "STRIPE_PUBLIC_KEY"
      type: "api_key"
      format: "pk_*"
      description: "Publishable key (client-side)"
      required: true
      secret: false

    - key: "STRIPE_SECRET_KEY"
      type: "api_key"
      format: "sk_*"
      description: "Secret key (server-side only)"
      required: true
      secret: true

    - key: "STRIPE_WEBHOOK_SECRET"
      type: "string"
      format: "whsec_*"
      description: "Webhook signing secret"
      required: false
      secret: true

  guide: "guides/stripe-setup.md"
  setup_time: "10 minutes"
  cost: "FREE (Test mode, production có fees)"

# ═══════════════════════════════════════════════════════════
# DATABASE SERVICES
# ═══════════════════════════════════════════════════════════

mongodb:
  keywords:
    - "mongodb"
    - "mongo"
    - "mongodb atlas"

  resources:
    - key: "MONGODB_URI"
      type: "connection_string"
      format: "mongodb+srv://*"
      description: "MongoDB connection string"
      required: true
      secret: true

  guide: "guides/mongodb-setup.md"
  setup_time: "5 minutes"
  cost: "FREE (M0 cluster)"

postgres_local:
  keywords:
    - "postgres"
    - "postgresql"
    - "local database"

  resources:
    - key: "DATABASE_URL"
      type: "connection_string"
      format: "postgresql://*"
      description: "PostgreSQL connection string"
      required: true
      secret: true

  guide: "guides/postgres-local.md"
  setup_time: "10 minutes"
  cost: "FREE (Local installation)"

# ═══════════════════════════════════════════════════════════
# AUTHENTICATION
# ═══════════════════════════════════════════════════════════

auth0:
  keywords:
    - "auth0"
    - "authentication service"
    - "oauth provider"

  resources:
    - key: "AUTH0_DOMAIN"
      type: "string"
      description: "Auth0 domain"
      required: true

    - key: "AUTH0_CLIENT_ID"
      type: "string"
      description: "Client ID"
      required: true

    - key: "AUTH0_CLIENT_SECRET"
      type: "string"
      description: "Client secret"
      required: true
      secret: true

  guide: "guides/auth0-setup.md"
  setup_time: "10 minutes"
  cost: "FREE (Up to 7000 active users)"

# ═══════════════════════════════════════════════════════════
# STORAGE
# ═══════════════════════════════════════════════════════════

s3:
  keywords:
    - "s3"
    - "aws s3"
    - "object storage"

  resources:
    - key: "AWS_ACCESS_KEY_ID"
      type: "string"
      description: "AWS Access Key"
      required: true
      secret: true

    - key: "AWS_SECRET_ACCESS_KEY"
      type: "string"
      description: "AWS Secret Key"
      required: true
      secret: true

    - key: "AWS_REGION"
      type: "string"
      description: "AWS Region (e.g., ap-southeast-1)"
      required: true

    - key: "S3_BUCKET_NAME"
      type: "string"
      description: "S3 bucket name"
      required: true

  guide: "guides/s3-setup.md"
  setup_time: "15 minutes"
  cost: "PAY-AS-YOU-GO (Free tier có giới hạn)"

# ═══════════════════════════════════════════════════════════
# EMAIL SERVICES
# ═══════════════════════════════════════════════════════════

sendgrid:
  keywords:
    - "sendgrid"
    - "email service"
    - "transactional email"

  resources:
    - key: "SENDGRID_API_KEY"
      type: "api_key"
      format: "SG.*"
      description: "SendGrid API key"
      required: true
      secret: true

  guide: "guides/sendgrid-setup.md"
  setup_time: "5 minutes"
  cost: "FREE (100 emails/day)"

resend:
  keywords:
    - "resend"
    - "email api"

  resources:
    - key: "RESEND_API_KEY"
      type: "api_key"
      format: "re_*"
      description: "Resend API key"
      required: true
      secret: true

  guide: "guides/resend-setup.md"
  setup_time: "3 minutes"
  cost: "FREE (3000 emails/month)"

# ═══════════════════════════════════════════════════════════
# ANALYTICS
# ═══════════════════════════════════════════════════════════

google_analytics:
  keywords:
    - "google analytics"
    - "ga4"
    - "analytics"

  resources:
    - key: "GA_MEASUREMENT_ID"
      type: "string"
      format: "G-*"
      description: "GA4 Measurement ID"
      required: true

  guide: "guides/google-analytics-setup.md"
  setup_time: "5 minutes"
  cost: "FREE"

# ═══════════════════════════════════════════════════════════
# DETECTION PRIORITY
# ═══════════════════════════════════════════════════════════

priority:
  # Thứ tự ưu tiên detect (nếu match nhiều services)
  order:
    - "supabase"
    - "firebase"
    - "openai"
    - "anthropic"
    - "stripe"
    - "mongodb"
    - "postgres_local"
    - "auth0"
    - "s3"
    - "sendgrid"
    - "resend"
    - "google_analytics"
